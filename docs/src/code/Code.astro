---
import fs from 'node:fs/promises'
import { Code as StarlightCode } from '@astrojs/starlight/components'

type Props = {
    path: string
}

const { path } = Astro.props
const url = new URL(`../../../examples/${path}`, import.meta.url)
const file = await fs.readFile(url, 'utf-8')

const title = path.split('/').at(-1) ?? ''
const lang = title.split('.').at(-1) ?? ''
---

<StarlightCode code={file} lang={lang} title={title} />
